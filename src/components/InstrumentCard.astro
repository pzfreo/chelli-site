---
import { statusLabels, typeLabels } from '../lib/labels';

interface Props {
  title: string;
  subtitle: string;
  type: string;
  status: string;
  price?: number;
  featuredImage: string;
  slug: string;
}

const { title, subtitle, type, status, price, featuredImage, slug } = Astro.props;

const statusLabel = statusLabels[status] || status;
const typeLabel = typeLabels[type] || type;
---

<a
  href={`/instruments/${slug}`}
  class="group block"
  data-type={type}
  data-status={status}
>
  <div class="relative aspect-[3/4] overflow-hidden bg-gray-100 mb-4">
    <img
      src={featuredImage}
      alt={title}
      class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
      loading="lazy"
    />
    <div class="absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-300" />

    {status === 'for-sale' && price && (
      <div class="absolute bottom-4 left-4 bg-white/95 px-3 py-1.5 text-sm font-medium">
        Â£{price.toLocaleString()}
      </div>
    )}

    {status === 'sold' && (
      <div class="absolute bottom-4 left-4 bg-charcoal text-white px-3 py-1.5 text-sm font-medium">
        Sold
      </div>
    )}
  </div>

  <div class="space-y-1">
    <p class="text-xs uppercase tracking-wider text-gray-500">{typeLabel}</p>
    <h3 class="font-serif text-lg group-hover:text-warmgold transition-colors">{title}</h3>
    <p class="text-sm text-gray-600">{subtitle}</p>
  </div>
</a>
